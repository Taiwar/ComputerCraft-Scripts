success = 0
data = 0
obsi = false
turncycle = 0

function detectObs()
  if turtle.detect() then
    success, data = turtle.inspect()
    if success then
      if data.name == "minecraft:obsidian" then
        print("found obsidian; mining...")
        turtle.dig()
        turntimes = 0
        turncycle = 0 
      else
        print("no obsidian in front")
        obsi = "nobs"
        moveObs()
      end  
    end
 else
    print("air in front")
    obsi = false
    moveObs()
 end
end

function moveObs()
  if not obsi then  
    print("turncycle: " .. turncycle)
    if turncycle < 4 then
      print("Moving forwards")
      turtle.forward()
      turtle.turnRight()
      turncycle = turncycle + 1
      detectObs()
    else
      print("no obsidian around me")
      if not turtle.forward() then
        print("path blocked, turning")
        turtle.turnRight()
        detectObs()
      else
        print("successfully moved, searching obsidian...")
        turncycle = 0
        detectObs()
      end
    end      
  elseif obsi == "nobs" then
    print("turning Left")
    turtle.turnLeft()
    detectObs()
  end  
end

print("How much obsidian?")

loops = tonumber(read())
for i = 1, loops do
  print("loop: "..i)
  detectObs() 
end
print("Successfully mined " .. loops .. " obsidian")
           
